#define _POSIX_SOURCE
#include <unistd.h>
#include <sys/types.h>
#include <signal.h>
#include <stdio.h>
#include <time.h>

void handler(int signal){
    printf("[PID %d] Signal recieved: %d\n", getpid(), signal);
}

int main(){

    int childPID = fork();
    if(childPID > 0){
        // Parent process
        printf("PARENT PID: %d\n", getpid());
        sleep(5); // give enough time for the child to set up the handler
        kill(childPID, SIGINT); // equivalent to terminal interrupt. Same as Ctrl+C 
        sleep(5);
        kill(childPID, SIGKILL); // kill the process --- and can the non-root parent process actually send this signal?
    }

    else{
        // child process
        printf("CHILD PID: %d\n", getpid());
        // define custom signal handlers
        signal(SIGINT, handler);
        signal(SIGKILL, handler);

        // hang indefinitely
        while(1);
    }
}
